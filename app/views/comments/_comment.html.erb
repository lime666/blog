<% if comment.parent.present? %>

<p><%== comment.body %></p>
<p><%= comment.author.full_name %></p>
<p><%= comment.status %></p>

<p class="fw-lighter">Updated: <%= distance_of_time_in_words(comment.updated_at, Time.now) %> ago.</p>

<% if current_author %>
<p>Likes: <%= comment.author_comment_votes.liked.count %></p>
<%= button_to '👍', post_comment_like_path(post_id: comment.post.id, comment_id: comment.id), method: :post %>
<p>Dislikes: <%= comment.author_comment_votes.disliked.count %></p>
<%= button_to '👎', post_comment_dislike_path(post_id: comment.post.id, comment_id: comment.id), method: :post %>
<% end %>

<p>
<% if comment.created_at != comment.updated_at %><b>edited</b> <%end%>
<% if current_author && current_author.id == comment.author.id %>
  <p><%= link_to "Edit Comment", edit_post_comment_path(comment.post, comment) if comment.created_at >= 1.hour.ago %></p>
  <p><%= link_to "Delete Comment", [comment.post, comment], method: :delete, data: { confirm: 'Are you sure?' } %></p>
  <% if comment.unpublished? %>
    <div class='btn btn-danger'>
      <%= link_to 'Publish Comment', post_comment_path(id: comment, post_id: comment.post, comment: { status: :published }), method: :patch %>
    </div>
  <% end %>
<% end %>
</p>

<% end %>

<% if current_author && comment.ancestors.count < 5 %>
  <button class='btn btn-outline-info reply_button'>Reply</button>
  <%= render 'comments/form', parent_comment: comment.id %>
<% end %>

<% if comment.children.present? %>
<% comment.children.each do |children| %>
  <p><%= render 'comments/comment', comment: children %></p>
<% end %>
<hr />

<% end %>
